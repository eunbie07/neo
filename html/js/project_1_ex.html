<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê°•ë‚¨ì—­ ë¯¸ì„¸ë¨¼ì§€ ë¹„êµ</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; }
    .box { border: 1px solid #ccc; border-radius: 10px; padding: 1rem; margin-bottom: 1rem; }
    .good { color: green; }
    .bad { color: red; }
  </style>
</head>
<body>
  <h1>ğŸš‡ ê°•ë‚¨ì—­ ì‹¤ë‚´ vs ì‹¤ì™¸ ë¯¸ì„¸ë¨¼ì§€ ë¹„êµ</h1>
  <button onclick="compareDust()">ë¹„êµí•˜ê¸°</button>

  <div class="box" id="result"></div>

  <script>
    const serviceKey = "89mzRrYVPoIjA0HWVA%2FtiFPmvByqnXJFK8acRZ9tVXmETXDcn%2FQq0LmCwdO%2B5H%2F4q4G6Emy3NFG2bLbk8pxoPQ%3D%3D"; // â˜… ì„œë¹„ìŠ¤ í‚¤ ë„£ìœ¼ì„¸ìš”

    async function compareDust() {
      const stationName = encodeURIComponent("ê°•ë‚¨êµ¬");
      const url = `https://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getMsrstnAcctoRltmMesureDnsty?stationName=${stationName}&dataTerm=DAILY&pageNo=1&numOfRows=1&returnType=json&serviceKey=${serviceKey}`;

      try {
        const response = await fetch(url);
        const json = await response.json();
        const outsidePM10 = parseInt(json.response.body.items[0].pm10Value); // ì‹¤ì™¸

        const insidePM10 = 25; // ì‹¤ë‚´ í‰ê·  (ì„œìš¸êµí†µê³µì‚¬ ë°œí‘œ ê¸°ì¤€ê°’)

        const recommendation = outsidePM10 > insidePM10
          ? "ì§€í•˜ì²  ì—­ë‚´ ê³µê¸°ê°€ ë” ê¹¨ë—í•©ë‹ˆë‹¤. ì§€í•˜ ì´ë™ì„ ì¶”ì²œí•©ë‹ˆë‹¤!"
          : "ì§€ìƒ ê³µê¸°ê°€ ë” ì¢‹ìŠµë‹ˆë‹¤. ë²„ìŠ¤ë¥¼ íƒ€ì…”ë„ ê´œì°®ì•„ìš”.";

        document.getElementById("result").innerHTML = `
          <p>ğŸ“ <strong>ê°•ë‚¨ì—­ ì‹¤ì™¸ PM10:</strong> <span class="${outsidePM10 > 50 ? 'bad' : 'good'}">${outsidePM10}ã/ã¥</span></p>
          <p>ğŸ¢ <strong>ê°•ë‚¨ì—­ ì—­ë‚´ PM10 (ì˜ˆìƒ):</strong> <span class="${insidePM10 > 50 ? 'bad' : 'good'}">${insidePM10}ã/ã¥</span></p>
          <hr>
          <p><strong>${recommendation}</strong></p>
        `;
      } catch (error) {
        document.getElementById("result").innerHTML = `<p style="color:red">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>`;
        console.error(error);
      }
    }
  </script>
</body>
</html>
